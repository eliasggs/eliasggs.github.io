<!DOCTYPE html>
<html lang="es-AR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Herramientas de planillas</title>
  <link rel="stylesheet" type="text/css" href="planilla_styles.css">
</head>
<!--------                  ----------->
<body>
  <div id="scrollableContainer">
    <div class="container">
      <div class="form-container">
        <h2>Seleccione una plantilla y rellene</h2>
        <select id="formSelector" onchange="showForm()">
          <!-- Dynamically generate options based on the forms object -->
          <option value="form1">[IT] Error de agenda</option>
          <option value="form2">[IT] Adelanto de Agenda</option>
          <option value="form3">[IT] Aseguramiento de Cita</option>
          <option value="form4">Suspensión por Mora sin Deuda</option>
          <option value="form4">Suspensión voluntaria</option>
          <option value="form69">Cierre/Legalización de OT.</option>
          <option value="form5">Inconvenientes con Flow App</option>
          <option value="form6">Inconvenientes con TOIP</option>
          <option value="form78">Regularizar Serializable.</option>
          <option value="form7">Error en Vista 360</option>
          <option value="form70">Error en Asistencia Técnica (FAN)</option>
          <option value="form8">Flow App - Falla de Señal en Vivo.</option>
          <option value="form9">Flow App - Falla de Señal VOD</option>
          <option value="form10">Flow App - Flow App Inactiva en Minerva</option>
          <option value="form11">Flow App - No funciona RestartTV/ReverseEPG.</option>
          <option value="form12">Flow App - Error A15/A16 Al ingresar.</option>
          <option value="form13">Flow App - Error A308 al ingresar.</option>
          <option value="form14">Flow App - Error de Acceso Flow APP en Dispositivo Particular.</option>
          <option value="form15">Flow App - Flow con Grilla asignada incorrecta. No ve canales locales.</option>
          <option value="form16">Flow App - Problema: Pack faltante en Minerva Flow APP.</option>
          <option value="form17">Flow Box - Placa de Validación.</option>
          <option value="form18">Flow Box - Box Saltea Canales</option>
          <option value="form19">Flow Box - Placa de Activación.</option>
          <option value="form20">Flow Box - Placa activación S1039 / Deco NO enlistado.</option>
          <option value="form21">Flow Box - Pantalla en negro en Vivo.</option>
          <option value="form22">Flow Box - Pantalla en negro en VOD.</option>
          <option value="form23">Flow Box - Falla en Audio en contenido en Vivo.</option>
          <option value="form24">Flow Box - Falla en Audio en contenido VOD.</option>
          <option value="form25">Flow Box - Falla Subtitulos en contenido en Vivo.</option>
          <option value="form26">Flow Box - Falla Subtitulos en contenido VOD.</option>
          <option value="form27">Flow Box - Imagen Pixela en contenido en vivo.</option>
          <option value="form28">Flow Box - Imagen Pixela en contenido VOD.</option>
          <option value="form29">Flow Box - Placa carga datos fija X/18.</option>
          <option value="form30">Flow Box - Error en RestartTV/ReverseEPG/Grabaciones.</option>
          <option value="form31">Flow Box - Problemas con la Guía.</option>
          <option value="form32">Flow Box- Deco se reinicia (CMTS CBR8).</option>
          <option value="form33">Flow Box - Placa "Oh oh...tenemos un problema (S917)".</option>
          <option value="form34">Flow Box - Problemas con APP.</option>
          <option value="form35">Flow Box - Flow con Grilla asignada incorrecta. No ve canales locales.</option>
          <option value="form36">Flow Full IP - Flow con Grilla asignada incorrecta. No ve canales locales.</option>
          <!-- ... Add other options as needed -->
        </select>
        <!-- Dynamically generate forms based on the forms object -->
        <script src="planillas.js"></script>
        <script>

          function generateForm(formId, formInfo) {
            const formElement = document.createElement("form");
            formElement.id = formId;

            // Inside the generateForm function
            formInfo.fields.forEach(field => {
              const label = document.createElement("label");
              label.textContent = field.label;

              const input = field.type === "textarea" ? document.createElement("textarea") : document.createElement(field.type === "select" ? "select" : "input");
              input.name = field.name;
              input.required = field.required;

              if (field.type === "select") {
                field.options.forEach(option => {
                  const optionElement = document.createElement("option");
                  optionElement.value = option.value;
                  optionElement.textContent = option.label;
                  input.appendChild(optionElement);
                });
              }

              if (field.type === "textarea") {
                input.rows = field.rows || 2; // Set default rows to 2 if not specified
                input.className = "text-input";
              }

              formElement.appendChild(label);
              formElement.appendChild(input);
            });

              /*
            const copyButton = document.createElement("button");
            copyButton.type = "button";
            copyButton.className = "copy-button"
            copyButton.textContent = "Copiar Planilla al portapapeles";
            copyButton.style.display = "inline-block";
            copyButton.onclick = function () {
              copyToClipboard(formId);
            };

            const resetButton = document.createElement("button");
            resetButton.type = "button";
            resetButton.className = "reset-button";
            resetButton.textContent = "Reiniciar";
            resetButton.style.display = "inline-block";
            resetButton.onclick = function () {
              resetForm(formId);
            };

            formElement.appendChild(copyButton);
            formElement.appendChild(resetButton);
                          */
            document.querySelector(".form-container").appendChild(formElement);
          }

          // Dynamically generate forms based on the forms object
          Object.entries(forms).forEach(([formId, formInfo]) => {
            generateForm(formId, formInfo);
          });
        </script>
        <input type="button" title="Copiar al portapapeles" value="Copiar al portapapeles" class="copy-button" onclick="copyToClipboard()">
        <input type="button" title="Reiniciar" value="Reiniciar" class="reset-button" onclick="resetForm()">
      </div>



      <div class="square">
        <h2>Tu planilla recién copiada</h2>
        <!-- Output textarea next to the form elements -->
        <textarea id="outputTextArea"></textarea>
      </div>
    </div>
  </div>
  <script>
    function showForm() {
      var formSelector = document.getElementById("formSelector");
      var selectedForm = formSelector.value;

      // Hide all forms
      var forms = document.querySelectorAll('.form-container form');
      forms.forEach(function (form) {
        form.style.display = 'none';
      });

      // Show the selected form
      document.getElementById(selectedForm).style.display = 'inline';
    }

    function resetForm() {
      var formId = formSelector.value
      var form = document.getElementById(formId);
      form.reset();
      var outputTextArea = document.getElementById("outputTextArea");
      outputTextArea.value = '';
    }

    function copyToClipboard() {
      var formId = formSelector.value
      var form = document.getElementById(formId);
      var formData = Array.from(form.elements)
        .filter(el => el.type !== "button")
        .map(el => el.name + ": " + el.value)
        .join("\n");

      // get the Form Selector Text
      var formSelectorText = document.getElementById("formSelector").options[document.getElementById("formSelector").selectedIndex].text;
      var outputTextArea = document.getElementById("outputTextArea");

      // Fill the output Text Area
      outputTextArea.value = formSelectorText + "\n" + formData;

      // Copy it
      outputTextArea.select();
      document.execCommand("copy");
    }

    showForm();
  </script>
</body>

</html>